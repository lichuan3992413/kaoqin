(function(b,c){var a="om-accordion-panel-"+(((1+Math.random())*65536)|0).toString(16).substring(1)+"-",d=0;b.omWidget("om.omAccordion",{options:{active:0,autoPlay:false,collapsible:false,disabled:false,height:"auto",iconCls:null,interval:1000,switchEffect:false,switchMode:"click",width:"auto",onActivate:function(e,f){},onBeforeActivate:function(e,f){},onBeforeCollapse:function(e,f){},onCollapse:function(e,f){}},activate:function(f){var e=this.options;clearInterval(e.autoInterId);this._activate(f);this._setAutoInterId(this)},disable:function(){var g=this.element,f=this.options,e;if(f.autoPlay){clearInterval(f.autoInterId)}f.disabled=true;if((e=g.find(">.om-accordion-disable")).length===0){b("<div class='om-accordion-disable'></div>").css({position:"absolute",top:0,left:0}).width(g.outerWidth()).height(g.outerHeight()).appendTo(g)}e.show()},enable:function(){this.options.disabled=false;this.element.find(">.om-accordion-disable").hide()},getActivated:function(){var f=b.data(this.element,"panels");for(var g=0,e=f.length;g<e;g++){if(!f[g].omPanel("option","collapsed")){return f[g].prop("id")}}return null},getLength:function(){return b.data(this.element,"panels").length},reload:function(f){var e=b.data(this.element,"panels");if(this.options.disabled!==false||e.length===0){return this}f=this._correctIndex(f);e[f].omPanel("reload")},resize:function(){var h=this.element,g=this.options,f=b.data(this.element,"panels"),e=0;this._initWidthOrHeight("width");this._initWidthOrHeight("height");b.each(f,function(j,i){e+=i.prev().outerHeight()});b.each(f,function(j,i){if(g.height==="auto"){i.css("height","")}else{i.outerHeight(h.height()-e)}})},setTitle:function(f,g){var e=b.data(this.element,"panels");if(this.options.disabled!==false||e.length===0){return this}f=this._correctIndex(f);e[f].omPanel("setTitle",g)},url:function(g,f){var e=b.data(this.element,"panels");if(!f||this.options.disabled!==false||e.length===0){return}g=this._correctIndex(g);e[g].omPanel("option","url",f)},_create:function(){var f=this.element,e=this.options;f.addClass("om-widget om-accordion").css("position","relative");this._renderPanels();e.active=this._correctIndex(e.active);this.resize();this._buildEvent();if(e.disabled!==false){this.disable()}},_correctIndex:function(h){var j=this.element,g=b.data(this.element,"panels"),f=j.children().find(">div#"+h),e=g.length,k=h;h=f.length?j.find(">.om-panel").index(f.parent()):h;h=h==-1?k:h;var i=parseInt(h);i=(isNaN(i)&&"0"||i)-0;return e==0||(i===-1&&this.options.collapsible!==false)?-1:(i<0?0:(i>=e?e-1:i))},_panelCreateCollapse:function(e,i){var k=this.element,h=this.options,f,g;if(h.active===-1&&h.collapsible===true){return true}else{f=k.find(">div#"+h.active);g=k.children().index(f);g=(g==-1?h.active:g);var j=parseInt(g);j=(isNaN(j)&&"0"||j)-0;j=j<0?0:(j>=e?e-1:j);return j!==i}},_renderPanels:function(){var j=this.element,f=this,h=[],g=this.options;var i=j.find("ul:first");var e=[];i.find("a").each(function(r){var k=this.getAttribute("href",2);var o=k.split("#")[0],q;if(o&&(o===location.toString().split("#")[0]||(q=b("base")[0])&&o===q.href)){k=this.hash;this.href=k}var m=b(this);e[r]={title:m.text(),iconCls:m.attr("iconCls"),onExpand:function(n){f._trigger("onActivate",n,r)},tools:[{id:"collapse",handler:function(n,s){clearInterval(g.autoInterId);f._activate(r,true);f._setAutoInterId(f);s.stopPropagation()}}],onCollapse:function(n){f._trigger("onCollapse",n,r)},onSuccess:function(){f.resize()},onError:function(){f.resize()}};var p=b(">"+k,j);var l=p.prop("id");if(!!(p[0])){if(!l){p.prop("id",a+(d++))}p.appendTo(j)}else{e[r].url=m.attr("href");b("<div></div>").prop("id",m.prop("id")||a+(d++)).appendTo(j)}});i.remove();b.each(e,function(l,k){k.collapsed=f._panelCreateCollapse(e.length,l)});b.each(j.children(),function(m,l){h.push(f._createPanel(l,e[m]));if(m===0){var k=h[0].prev();k.css("border-top-width",k.css("border-bottom-width"))}});b.data(j,"panels",h)},_initWidthOrHeight:function(f){var i=this.element,e=this.options,g=this.element.attr("style"),h=e[f];if(h=="fit"){i.css(f,"100%")}else{if(h!=="auto"){i.css(f,h)}else{if(g&&g.indexOf(f)!=-1){e[f]=i.css(f)}else{i.css(f,"")}}}},_createPanel:function(f,e){return b(f).omPanel(e)},_buildEvent:function(){var f=this.options,e=this;this.element.children().find(">div.om-panel-header").each(function(h){var g=b(this);g.hover(function(){b(this).toggleClass("om-panel-header-hover")});if(f.switchMode=="mouseover"){g.bind("mouseenter.omaccordions",function(i){clearInterval(f.autoInterId);var j=b.data(e.element,"expandTimer");(typeof j!=="undefined")&&clearTimeout(j);j=setTimeout(function(){e._activate(h,true);e._setAutoInterId(e)},200);b.data(e.element,"expandTimer",j)})}else{if(f.switchMode=="click"){g.bind("click.omaccordions",function(i){clearInterval(f.autoInterId);e._activate(h,true);e._setAutoInterId(e)})}}});if(f.autoPlay){clearInterval(f.autoInterId);e._setAutoInterId(e)}},_setAutoInterId:function(e){var f=e.options;if(f.autoPlay){f.autoInterId=setInterval(function(){e._activate("next")},f.interval)}},_setOption:function(f,g){b.OMWidget.prototype._setOption.apply(this,arguments);var e=this.options;switch(f){case"active":this.activate(g);break;case"disabled":g===false?this.enable():this.disable();break;case"width":e.width=g;this._initWidthOrHeight("width");break;case"height":e.height=g;this._initWidthOrHeight("height");break}},_activate:function(l,n){var o=b.data(this.element,"panels"),m=o.length,q=this.options,p=this,j=false,k=-1,g=false,e;if(q.disabled!==false&&m===0){return}l=l==="next"?(q.active+1)%m:p._correctIndex(l);if(q.switchEffect){g=true;e="fast"}for(var h=0;h<m;h++){b(o[h]).stop(true,true)}var f=p.getActivated();j=!!f;if(j){k=p._correctIndex(f);if(k==l){if(n===true&&q.collapsible!==false&&p._trigger("onBeforeCollapse",null,k)!==false){b(o[k]).omPanel("collapse",g,e);q.active=-1}else{q.active=k}}else{if(l===-1){if(p._trigger("onBeforeCollapse",null,k)!==false){b(o[k]).omPanel("collapse",g,e);q.active=-1}else{q.active=k}}else{if(p._trigger("onBeforeCollapse",null,k)!==false&&(canAct=p._trigger("onBeforeActivate",null,l)!==false)){b(o[k]).omPanel("collapse",g,e);b(o[l]).omPanel("expand",g,e);q.active=l}else{q.active=k}}}}else{if(l==="-1"){q.active=-1}else{if(p._trigger("onBeforeActivate",null,l)!==false){b(o[l]).omPanel("expand",g,e);q.active=l}}}}})})(jQuery);